[2025-04-27 16:17:11] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-27 16:17:11] INFO: æœåŠ¡å™¨åœ¨ç«¯å£ 5000 ä¸Šè¿è¡Œ
[2025-04-27 16:17:11] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-27 16:18:19] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-27 16:18:19] INFO: æœåŠ¡å™¨åœ¨ç«¯å£ 5000 ä¸Šè¿è¡Œ
[2025-04-27 16:18:19] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-28 21:10:33] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-28 21:10:33] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-28 21:11:49] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-28 21:56:45] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-28 21:56:45] INFO: æœåŠ¡å™¨åœ¨ç«¯å£ 5000 ä¸Šè¿è¡Œ
[2025-04-28 21:56:45] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-28 21:57:03] INFO: POST /api/ai/chat
[2025-04-28 21:57:03] ERROR: unhandledRejection: logger.error is not a function
TypeError: logger.error is not a function
    at file:///home/ebit/jobtry1/backend/routes/aiRoutes.js:49:10
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
{
  "error": {},
  "rejection": true,
  "date": "Mon Apr 28 2025 21:57:03 GMT+0800 (China Standard Time)",
  "process": {
    "pid": 14057,
    "uid": 1000,
    "gid": 1000,
    "cwd": "/home/ebit/jobtry1/backend",
    "execPath": "/usr/bin/node",
    "version": "v23.9.0",
    "argv": [
      "/usr/bin/node",
      "/home/ebit/jobtry1/backend/server.js"
    ],
    "memoryUsage": {
      "rss": 145076224,
      "heapTotal": 54218752,
      "heapUsed": 51194232,
      "external": 22066711,
      "arrayBuffers": 18440202
    }
  },
  "os": {
    "loadavg": [
      1.2,
      0.83,
      0.61
    ],
    "uptime": 1506.51
  },
  "trace": [
    {
      "column": 10,
      "file": "file:///home/ebit/jobtry1/backend/routes/aiRoutes.js",
      "function": null,
      "line": 49,
      "method": null,
      "native": false
    },
    {
      "column": 5,
      "file": "node:internal/process/task_queues",
      "function": "process.processTicksAndRejections",
      "line": 105,
      "method": "processTicksAndRejections",
      "native": false
    }
  ]
}
TypeError: logger.error is not a function
    at file:///home/ebit/jobtry1/backend/routes/aiRoutes.js:49:10
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[2025-04-28 21:57:03] ERROR: æœªå¤„ç†çš„Promiseæ‹’ç»: logger.error is not a function
[2025-04-28 22:00:27] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-28 22:00:27] INFO: æœåŠ¡å™¨åœ¨ç«¯å£ 5000 ä¸Šè¿è¡Œ
[2025-04-28 22:00:27] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-28 22:00:34] INFO: POST /api/ai/chat
[2025-04-28 22:00:34] ERROR: AI èŠå¤©é”™è¯¯: logger.error is not a function
[2025-04-28 22:00:52] INFO: POST /api/ai/chat
[2025-04-28 22:00:52] ERROR: AI èŠå¤©é”™è¯¯: logger.error is not a function
[2025-04-28 22:05:21] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-28 22:05:21] INFO: æœåŠ¡å™¨åœ¨ç«¯å£ 5000 ä¸Šè¿è¡Œ
[2025-04-28 22:05:21] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-28 22:05:28] INFO: POST /api/ai/chat
[2025-04-28 22:05:28] INFO: æ‰§è¡Œè‡ªå®šä¹‰AIåˆ†æ: å¾—åˆ°...
[2025-04-28 22:05:29] ERROR: DeepSeek APIé”™è¯¯: Request failed with status code 404
[2025-04-28 22:05:29] ERROR: è‡ªå®šä¹‰AIåˆ†æé”™è¯¯: AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404
[2025-04-28 22:05:29] ERROR: AI èŠå¤©é”™è¯¯: AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404
[2025-04-28 22:12:26] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-28 22:12:26] INFO: æœåŠ¡å™¨åœ¨ç«¯å£ 5000 ä¸Šè¿è¡Œ
[2025-04-28 22:12:26] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-28 22:12:31] INFO: POST /api/ai/chat
[2025-04-28 22:12:31] INFO: æ‰§è¡Œè‡ªå®šä¹‰AIåˆ†æ: ä½ å¥½...
[2025-04-28 22:12:31] ERROR: DeepSeek APIé”™è¯¯: Request failed with status code 404
[2025-04-28 22:12:31] ERROR: è‡ªå®šä¹‰AIåˆ†æé”™è¯¯: AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404
[2025-04-28 22:12:31] ERROR: AI èŠå¤©é”™è¯¯: AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404
[2025-04-28 22:19:28] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-28 22:19:28] INFO: åˆå§‹åŒ–DeepSeekå®¢æˆ·ç«¯ï¼ŒbaseURL: https://api.deepseek.com
[2025-04-28 22:19:28] INFO: æœåŠ¡å™¨åœ¨ç«¯å£ 5000 ä¸Šè¿è¡Œ
[2025-04-28 22:19:28] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-28 22:19:37] INFO: POST /api/ai/chat
[2025-04-28 22:19:37] DEBUG: å‘é€ DeepSeek èŠå¤©è¯·æ±‚: [{"role":"system","content":"ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æå’Œç†è§£äº’è”ç½‘æ•°æ®ã€‚è¯·æä¾›ä¸“ä¸šã€å‡†ç¡®ã€ç®€æ´çš„å›ç­”ã€‚"},{"role":"assistant","content":"ä¸ AI èŠå¤©å¤±è´¥ï¼Œè¯·ç¨åå†è¯•"},{"role":"user","content":"ä½ å¥½"},{"role":"assistant","content":"logger.error is not a function"},{"role":"user","content":"ä½ ç»™"},{"role":"assistant","content":"logger.error is not a function"},{"role":"user","content":"å¾—åˆ°"},{"role":"assistant","content":"AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404"},{"role":"user","content":"ä½ å¥½"},{"role":"assistant","content":"AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404"},{"role":"user","content":"test"},{"role":"user","content":"test"}]
[2025-04-28 22:19:37] ERROR: AI èŠå¤©é”™è¯¯: aiService.chat is not a function
[2025-04-28 22:45:01] DEBUG: å½“å‰ç¯å¢ƒé…ç½®:
{
  "NODE_ENV": "development",
  "PORT": 5000,
  "HOST": "localhost",
  "MONGO_URI": "mongodb://localhost:27017/crawler-ai",
  "JWT_SECRET": "******",
  "JWT_EXPIRE": "30d",
  "DEEPSEEK_API_KEY": "******",
  "DEEPSEEK_API_URL": "https://api.deepseek.com/v1",
  "CRAWLER_MAX_CONCURRENCY": 5,
  "LOG_LEVEL": "debug",
  "CORS_ORIGIN": "http://localhost:3000"
}
[2025-04-28 22:45:02] INFO: åˆå§‹åŒ–DeepSeekå®¢æˆ·ç«¯ï¼ŒbaseURL: https://api.deepseek.com
[2025-04-28 22:45:02] INFO: æœåŠ¡å™¨åœ¨ç«¯å£ 5000 ä¸Šè¿è¡Œ
[2025-04-28 22:45:02] INFO: MongoDB è¿æ¥æˆåŠŸ: localhost
[2025-04-28 22:45:28] INFO: POST /api/ai/chat
[2025-04-28 22:45:28] DEBUG: å‘é€ DeepSeek èŠå¤©è¯·æ±‚: [{"role":"system","content":"ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æå’Œç†è§£äº’è”ç½‘æ•°æ®ã€‚è¯·æä¾›ä¸“ä¸šã€å‡†ç¡®ã€ç®€æ´çš„å›ç­”ã€‚"},{"role":"assistant","content":"logger.error is not a function"},{"role":"user","content":"ä½ ç»™"},{"role":"assistant","content":"logger.error is not a function"},{"role":"user","content":"å¾—åˆ°"},{"role":"assistant","content":"AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404"},{"role":"user","content":"ä½ å¥½"},{"role":"assistant","content":"AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404"},{"role":"user","content":"test"},{"role":"assistant","content":"AI èŠå¤©é”™è¯¯: aiService.chat is not a function"},{"role":"user","content":"å¥½å¥½"},{"role":"user","content":"å¥½å¥½"}]
[2025-04-28 22:45:28] INFO: å‘é€ DeepSeek èŠå¤©è¯·æ±‚: [{"role":"system","content":"ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æå’Œç†è§£äº’è”ç½‘æ•°æ®ã€‚è¯·æä¾›ä¸“ä¸šã€å‡†ç¡®ã€ç®€æ´çš„å›ç­”ã€‚"},{"role":"assistant","content":"logger.error is not a function"},{"role":"user","content":"ä½ ç»™"},{"role":"assistant","content":"logger.error is not a function"},{"role":"user","content":"å¾—åˆ°"},{"role":"assistant","content":"AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404"},{"role":"user","content":"ä½ å¥½"},{"role":"assistant","content":"AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404"},{"role":"user","content":"test"},{"role":"assistant","content":"AI èŠå¤©é”™è¯¯: aiService.chat is not a function"},{"role":"user","content":"å¥½å¥½"},{"role":"user","content":"å¥½å¥½"}]
[2025-04-28 22:45:28] DEBUG: å‘é€èŠå¤©è¯·æ±‚: {"model":"deepseek-chat","messages":[{"role":"system","content":"ä½ æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œå¸®åŠ©ç”¨æˆ·åˆ†æå’Œç†è§£äº’è”ç½‘æ•°æ®ã€‚è¯·æä¾›ä¸“ä¸šã€å‡†ç¡®ã€ç®€æ´çš„å›ç­”ã€‚"},{"role":"assistant","content":"logger.error is not a function"},{"role":"user","content":"ä½ ç»™"},{"role":"assistant","content":"logger.error is not a function"},{"role":"user","content":"å¾—åˆ°"},{"role":"assistant","content":"AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404"},{"role":"user","content":"ä½ å¥½"},{"role":"assistant","content":"AIæœåŠ¡è¯·æ±‚å¤±è´¥: Request failed with status code 404"},{"role":"user","content":"test"},{"role":"assistant","content":"AI èŠå¤©é”™è¯¯: aiService.chat is not a function"},{"role":"user","content":"å¥½å¥½"},{"role":"user","content":"å¥½å¥½"}],"temperature":0.7,"max_tokens":1000,"top_p":0.9}
[2025-04-28 22:45:33] DEBUG: èŠå¤©å“åº”: {"id":"6fbe9b4b-466c-4b69-969b-570ed3e62af9","object":"chat.completion","created":1745851529,"model":"deepseek-chat","choices":[{"index":0,"message":{"role":"assistant","content":"ä½ å¥½ï¼è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®æ‚¨è§£å†³çš„é—®é¢˜å—ï¼ŸğŸ˜Š"},"logprobs":null,"finish_reason":"stop"}],"usage":{"prompt_tokens":93,"completion_tokens":12,"total_tokens":105,"prompt_tokens_details":{"cached_tokens":0},"prompt_cache_hit_tokens":0,"prompt_cache_miss_tokens":93},"system_fingerprint":"fp_8802369eaa_prod0425fp8"}
